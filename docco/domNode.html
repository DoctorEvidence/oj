<!DOCTYPE html>

<html>
<head>
  <title>domNode.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="sqlBuilderInit.html">
                sqlBuilderInit.js
              </a>
            
              
              <a class="source" href="SqlDragDropTableJoinStore.html">
                SqlDragDropTableJoinStore.js
              </a>
            
              
              <a class="source" href="SqlTableJoinSprite.html">
                SqlTableJoinSprite.js
              </a>
            
              
              <a class="source" href="SqlTableNameStore.html">
                SqlTableNameStore.js
              </a>
            
              
              <a class="source" href="_initQbUI.html">
                _initQbUI.js
              </a>
            
              
              <a class="source" href="qbFineTuningGrid.html">
                qbFineTuningGrid.js
              </a>
            
              
              <a class="source" href="qbOutputPanel.html">
                qbOutputPanel.js
              </a>
            
              
              <a class="source" href="qbSqlWindowTable.html">
                qbSqlWindowTable.js
              </a>
            
              
              <a class="source" href="qbTableGrid.html">
                qbTableGrid.js
              </a>
            
              
              <a class="source" href="qbTablePanel.html">
                qbTablePanel.js
              </a>
            
              
              <a class="source" href="qbTablesTree.html">
                qbTablesTree.js
              </a>
            
              
              <a class="source" href="fields.html">
                fields.js
              </a>
            
              
              <a class="source" href="joins.html">
                joins.js
              </a>
            
              
              <a class="source" href="manager.html">
                manager.js
              </a>
            
              
              <a class="source" href="select.html">
                select.js
              </a>
            
              
              <a class="source" href="tables.html">
                tables.js
              </a>
            
              
              <a class="source" href="function.html">
                function.js
              </a>
            
              
              <a class="source" href="is.html">
                is.js
              </a>
            
              
              <a class="source" href="methods.html">
                methods.js
              </a>
            
              
              <a class="source" href="number.html">
                number.js
              </a>
            
              
              <a class="source" href="string.html">
                string.js
              </a>
            
              
              <a class="source" href="to.html">
                to.js
              </a>
            
              
              <a class="source" href="indexedDb.html">
                indexedDb.js
              </a>
            
              
              <a class="source" href="class.html">
                class.js
              </a>
            
              
              <a class="source" href="classDefinition.html">
                classDefinition.js
              </a>
            
              
              <a class="source" href="errors.html">
                errors.js
              </a>
            
              
              <a class="source" href="subscribers.html">
                subscribers.js
              </a>
            
              
              <a class="source" href="console.html">
                console.js
              </a>
            
              
              <a class="source" href="constant.html">
                constant.js
              </a>
            
              
              <a class="source" href="each.html">
                each.js
              </a>
            
              
              <a class="source" href="object.html">
                object.js
              </a>
            
              
              <a class="source" href="objectSql.html">
                objectSql.js
              </a>
            
              
              <a class="source" href="property.html">
                property.js
              </a>
            
              
              <a class="source" href="shims.html">
                shims.js
              </a>
            
              
              <a class="source" href="uuid.html">
                uuid.js
              </a>
            
              
              <a class="source" href="metaNode.html">
                metaNode.js
              </a>
            
              
              <a class="source" href="_nodeFactory.html">
                _nodeFactory.js
              </a>
            
              
              <a class="source" href="domNode.html">
                domNode.js
              </a>
            
              
              <a class="source" href="domNodeAttributes.html">
                domNodeAttributes.js
              </a>
            
              
              <a class="source" href="_element.html">
                _element.js
              </a>
            
              
              <a class="source" href="div.html">
                div.js
              </a>
            
              
              <a class="source" href="span.html">
                span.js
              </a>
            
              
              <a class="source" href="initChildNameSpaces.html">
                initChildNameSpaces.js
              </a>
            
              
              <a class="source" href="dataModel.html">
                dataModel.js
              </a>
            
              
              <a class="source" href="dataType.html">
                dataType.js
              </a>
            
              
              <a class="source" href="dataTypeCollection.html">
                dataTypeCollection.js
              </a>
            
              
              <a class="source" href="_selectionModel.html">
                _selectionModel.js
              </a>
            
              
              <a class="source" href="selectionModelCheckBox.html">
                selectionModelCheckBox.js
              </a>
            
              
              <a class="source" href="_selectionSubscribers.html">
                _selectionSubscribers.js
              </a>
            
              
              <a class="source" href="onDeselect.html">
                onDeselect.js
              </a>
            
              
              <a class="source" href="onSelect.html">
                onSelect.js
              </a>
            
              
              <a class="source" href="proxy.html">
                proxy.js
              </a>
            
              
              <a class="source" href="store.html">
                store.js
              </a>
            
              
              <a class="source" href="actionColumn.html">
                actionColumn.js
              </a>
            
              
              <a class="source" href="checkColumn.html">
                checkColumn.js
              </a>
            
              
              <a class="source" href="column.html">
                column.js
              </a>
            
              
              <a class="source" href="columnItem.html">
                columnItem.js
              </a>
            
              
              <a class="source" href="columns.html">
                columns.js
              </a>
            
              
              <a class="source" href="gridColumn.html">
                gridColumn.js
              </a>
            
              
              <a class="source" href="rendererColumn.html">
                rendererColumn.js
              </a>
            
              
              <a class="source" href="grid.html">
                grid.js
              </a>
            
              
              <a class="source" href="_gridSubscribers.html">
                _gridSubscribers.js
              </a>
            
              
              <a class="source" href="bodyscroll.html">
                bodyscroll.js
              </a>
            
              
              <a class="source" href="drop.html">
                drop.js
              </a>
            
              
              <a class="source" href="render.html">
                render.js
              </a>
            
              
              <a class="source" href="panel.html">
                panel.js
              </a>
            
              
              <a class="source" href="_panelSubscribers.html">
                _panelSubscribers.js
              </a>
            
              
              <a class="source" href="afterLayout.html">
                afterLayout.js
              </a>
            
              
              <a class="source" href="sheet.html">
                sheet.js
              </a>
            
              
              <a class="source" href="_sheetSubscribers.html">
                _sheetSubscribers.js
              </a>
            
              
              <a class="source" href="beforeclose.html">
                beforeclose.js
              </a>
            
              
              <a class="source" href="beforeshow.html">
                beforeshow.js
              </a>
            
              
              <a class="source" href="show.html">
                show.js
              </a>
            
              
              <a class="source" href="_structureSet.html">
                _structureSet.js
              </a>
            
              
              <a class="source" href="structureSet.html">
                structureSet.js
              </a>
            
              
              <a class="source" href="_treeSubscribers.html">
                _treeSubscribers.js
              </a>
            
              
              <a class="source" href="afterrender.html">
                afterrender.js
              </a>
            
              
              <a class="source" href="itemdbclick.html">
                itemdbclick.js
              </a>
            
              
              <a class="source" href="tree.html">
                tree.js
              </a>
            
              
              <a class="source" href="treeNode.html">
                treeNode.js
              </a>
            
              
              <a class="source" href="treeStore.html">
                treeStore.js
              </a>
            
              
              <a class="source" href="nameSpace.html">
                nameSpace.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>domNode.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="comment">/*global n$:true */</span>
(<span class="function"><span class="keyword">function</span> <span class="params">(n$, _$)</span> {</span>

    n$.node.register(<span class="string">'makeTemp'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(id, el, _$el)</span> {</span>
        <span class="string">'use strict'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>return Object.create(new n$.metadata.Node());</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">return</span> <span class="keyword">new</span> n$.metadata.Node(id, el, _$el);
    });

    n$.node.register(<span class="string">'make'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(id, el, _$el)</span> {</span>
        <span class="string">'use strict'</span>;
        <span class="keyword">var</span> node = <span class="keyword">new</span> n$.metadata.Node(id, el, _$el);
        <span class="keyword">return</span> n$.node.extendNode(node);
    });

    n$.node.register(<span class="string">'extendNode'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(NsNode)</span> {</span>
        <span class="string">'use strict'</span>;
        <span class="keyword">var</span> NsInternal = Object.create(<span class="literal">null</span>);
        <span class="keyword">if</span> (!isNode(NsNode)) {
            <span class="keyword">throw</span> <span class="keyword">new</span> TypeError(<span class="string">'Cannot chain DOM methods without a Node.'</span>);
        }

        <span class="comment">/*** Region DOM Extension Methods  */</span>

        <span class="comment">/**
         * These are _THE_ mechanisms for building out the DOM.
         * NS may later support *pend methods, but for now it's turtles all the way down.
         */</span>
        Object.defineProperty(NsNode, <span class="string">'addChild'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(newNode)</span> {</span>
                <span class="keyword">return</span> NsInternal.buildChildNode(newNode);
            }
        });

        <span class="comment">/**
         * These are _THE_ mechanisms for building out the DOM.
         * NS may later support *pend methods, but for now it's turtles all the way down.
         */</span>
        Object.defineProperty(NsNode, <span class="string">'makeChild'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(html)</span> {</span>
                <span class="keyword">if</span> (n$.is.string(html)) {
                    <span class="keyword">return</span> NsNode.append(html);
                }
            }
        });

        NsInternal.buildChildNode = <span class="function"><span class="keyword">function</span> <span class="params">(node)</span> {</span>
            <span class="keyword">if</span> (!isNode(node)) {
                <span class="keyword">throw</span> <span class="keyword">new</span> TypeError(<span class="string">'Argument called with invalid node.'</span>);
            }

            <span class="keyword">if</span> (NsNode.rootNode) {
                node.rootNode = NsNode.rootNode;
            }
            <span class="keyword">else</span> <span class="keyword">if</span> (NsNode.parentNode) {
                node.rootNode = NsNode.parentNode;
            } <span class="keyword">else</span> {
                node.rootNode = NsNode;
            }

            node.parentNode = NsNode;

            NsNode.append(node[<span class="string">'?'</span>]);
            NsNode.childNodes.push(node);

            <span class="comment">/**
             * To complete the loop, the newly appended node must be extended with the node.methods collectiom;
             * which, in turn, will extend the node it receives with the elements factory.
            */</span>
            <span class="keyword">return</span> n$.node.extendNode(node);
        };

        <span class="comment">/*** End Region DOM Extension Methods  */</span>

        <span class="comment">/*** Region Vendor Selector Methods */</span>

        <span class="comment">/**
         *  NS doesn't need many vendor selectors,
         *  but when it does they are sequestered on this property to "try" to avoid confusion.
        */</span>
        <span class="keyword">var</span> el = Object.create(<span class="literal">null</span>);

        Object.defineProperty(el, <span class="string">'children'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(searchTerm, selector)</span> {</span>
                <span class="keyword">var</span> ret = [];
                <span class="keyword">if</span> (isNodeAlive(NsNode)) {
                    <span class="keyword">var</span> _$children = NsNode[<span class="string">'?'</span>].children(n$.to.string(searchTerm), n$.to.string(selector));
                    <span class="keyword">if</span> (_$children) {
                        _$children.each(<span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                            <span class="keyword">var</span> el = <span class="keyword">this</span>;
                            <span class="keyword">var</span> childNode = n$.nodes.make(el.id, el, _$(el));
                            ret.push(childNode);
                        });
                    }
                }
                <span class="keyword">return</span> ret;
            }
        });

        Object.defineProperty(el, <span class="string">'filter'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(selector)</span> {</span>
                <span class="keyword">var</span> ret = [];
                <span class="keyword">if</span> (selector &amp;&amp; isNodeAlive(NsNode)) {
                    <span class="keyword">var</span> _$children = NsNode[<span class="string">'?'</span>].filter(selector);
                    _$children.each(<span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                            <span class="keyword">var</span> el = <span class="keyword">this</span>;
                            <span class="keyword">var</span> childNode = n$.nodes.make(el.id, el, _$(el));
                            ret.push(childNode);
                        });
                }
                <span class="keyword">return</span> ret;
            }
        });

        Object.defineProperty(el, <span class="string">'find'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(selector)</span> {</span>
                <span class="keyword">var</span> ret = [];
                <span class="keyword">if</span> (selector &amp;&amp; isNodeAlive(NsNode)) {
                    <span class="keyword">var</span> _$children = NsNode[<span class="string">'?'</span>].find(selector);
                    <span class="keyword">if</span> (_$children.length &gt; <span class="number">0</span>) {
                        _$children.each(<span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                            <span class="keyword">var</span> el = <span class="keyword">this</span>;
                            <span class="keyword">var</span> childNode = n$.nodes.make(el.id, el, _$(el));
                            ret.push(childNode);
                        });
                    }
                }
                <span class="keyword">return</span> ret;
            }
        });

        Object.defineProperty(el, <span class="string">'first'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                <span class="keyword">var</span> ret = NsNode.childNodes[<span class="number">0</span>] || NsNode.el.children[<span class="number">0</span>];
                <span class="keyword">return</span> ret;
            }
        });

        Object.defineProperty(el, <span class="string">'parent'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                <span class="keyword">var</span> ret = {};
                <span class="keyword">if</span> (isNodeAlive(NsNode)) {
                    <span class="keyword">var</span> _$parent = NsNode[<span class="string">'?'</span>].parent();

                    <span class="keyword">if</span> (<span class="literal">false</span> === n$.is.vendorObject(_$parent) &amp;&amp; _$parent.length &gt; <span class="number">0</span>) {
                        ret = n$.node.make(_$parent[<span class="number">0</span>].id, _$parent[<span class="number">0</span>], _$parent);
                    }
                }
                <span class="keyword">return</span> ret;
            }
        });

        <span class="comment">/*** End Region Vendor Selector Methods */</span>

        <span class="comment">/*** Region DOM Manipulation Methods */</span>

        <span class="comment">/**
         * NS implements these wrappers around jQuery methods to provide better chaining on NS Nodes,
         * as well as to make it easy to swap out the DOM framework without having to change the interfaces
        */</span>
        Object.defineProperty(NsNode, <span class="string">'addClass'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(name)</span> {</span>
                <span class="keyword">if</span> (name &amp;&amp; isNodeAlive(NsNode)) {
                    NsNode[<span class="string">'?'</span>].addClass(name);
                }
                <span class="keyword">return</span> NsNode;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'append'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(object)</span> {</span>
                <span class="keyword">var</span> ret = NsNode;
                <span class="keyword">if</span> (object &amp;&amp; isNodeAlive(NsNode)) {
                    <span class="keyword">if</span>(n$.is.vendorObject(object) || n$.is.string(object)) {
                        NsNode[<span class="string">'?'</span>].append(object);</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <pre><code>                   var tmpNode = n$.node.makeTemp(object[0].id, object[0], object);
                   ret = NsInternal.buildChildNode(tmpNode, object);</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    }

                }
                <span class="keyword">return</span> ret;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'attr'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(name, value)</span> {</span>
                <span class="keyword">var</span> ret = <span class="literal">null</span>;
                <span class="keyword">if</span> (name &amp;&amp; isNodeAlive(NsNode)) {
                    ret = NsNode;

                    <span class="keyword">if</span> (n$.is.plainObject(name)) {
                        NsNode[<span class="string">'?'</span>].attr(name);
                    }
                    <span class="keyword">else</span> <span class="keyword">if</span> (arguments.length === <span class="number">1</span>) {
                        ret = NsNode[<span class="string">'?'</span>].attr(name);
                    }
                    <span class="keyword">else</span> {
                        NsNode[<span class="string">'?'</span>].attr(name, value);
                    }
                }
                <span class="keyword">return</span> ret;
            }
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <pre><code>   Object.defineProperty(NsNode, &#39;attach&#39;, {
       value: function (object) {
           var _$child = null,
               ret;
           if (object &amp;&amp; isNodeAlive(NsNode)) {
               _$child = n$.to.vendorDomObjFromString(object);
               if (false === n$.is.nullOrEmpty(_$child)) {
                   NsNode.append(_$child);
                   ret = NsInternal.buildChildNode(null, _$child);
               }
           }
           return ret;
       }
   });</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        Object.defineProperty(NsNode, <span class="string">'bind'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(eventName, event)</span> {</span>
                <span class="keyword">if</span> (eventName &amp;&amp; isNodeAlive(NsNode)) {
                    NsNode[<span class="string">'?'</span>].on(eventName, event);
                }
                <span class="keyword">return</span> NsNode;
            }
        });
        Object.defineProperty(NsNode, <span class="string">'on'</span>, {
            value: n$.bind
        });

        Object.defineProperty(NsNode, <span class="string">'clickOnEnter'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(anNsNode)</span> {</span>
                <span class="keyword">if</span> (anNsNode &amp;&amp; NsInternal.isNodeAlive()) {
                    NsNode[<span class="string">'?'</span>].clickOnEnter(anNsNode[<span class="string">'?'</span>]);
                }
                <span class="keyword">return</span> NsNode;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'css'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(param1, param2)</span> {</span>
                <span class="keyword">var</span> ret = NsNode;
                <span class="keyword">if</span> (param1 &amp;&amp; NsInternal.isNodeAlive()) {
                    <span class="keyword">if</span> (n$.is.plainObject(param1)) {
                        NsNode[<span class="string">'?'</span>].css(param1);
                    }
                    <span class="keyword">else</span> <span class="keyword">if</span> (arguments.length === <span class="number">1</span>) {
                        ret = NsNode[<span class="string">'?'</span>].css(param1);
                    }
                    <span class="keyword">else</span> {
                        NsNode[<span class="string">'?'</span>].css(param1, param2);
                    }
                }
                <span class="keyword">return</span> ret;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'data'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(prop, val)</span> {</span>
                <span class="keyword">var</span> ret = <span class="string">''</span>;
                <span class="keyword">if</span> (prop &amp;&amp; isNodeAlive(NsNode)) {
                    <span class="keyword">if</span> (n$.is.plainObject(prop)) {
                        setDataProperties(NsNode, NsInternal, prop);
                    }
                    <span class="keyword">else</span> {
                        <span class="keyword">switch</span> (arguments.length) {
                        <span class="keyword">case</span> <span class="number">1</span>:
                            ret = getDataProp(NsNode, NsInternal, prop);
                            <span class="keyword">break</span>;
                        <span class="keyword">case</span> <span class="number">2</span>:
                            setDataProp(NsNode, NsInternal, prop, val);
                            ret = NsNode;
                            <span class="keyword">break</span>;
                        }
                    }
                }
                <span class="keyword">return</span> ret;

            }
        });

        Object.defineProperty(NsNode, <span class="string">'disable'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                <span class="keyword">if</span> (isNodeAlive(NsNode)) {
                    NsInternal.enabled = <span class="literal">false</span>;
                    NsNode.addClass(<span class="string">'NsDisabled'</span>);
                    NsNode.attr(<span class="string">'disabled'</span>, <span class="string">'disabled'</span>);
                }
                <span class="keyword">return</span> NsNode;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'empty'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                <span class="keyword">if</span> (isNodeAlive(NsNode)) {
                    NsNode[<span class="string">'?'</span>].empty();
                    NsNode.childNodes = [];
                }
                <span class="keyword">return</span> NsNode;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'enable'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                <span class="keyword">if</span> (isNodeAlive(NsNode)) {
                    NsInternal.enabled = <span class="literal">true</span>;
                    NsNode.removeClass(<span class="string">'NsDisabled'</span>);
                    NsNode.removeAttr(<span class="string">'disabled'</span>);
                }
                <span class="keyword">return</span> NsNode;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'hide'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                <span class="keyword">if</span> (isNodeAlive(NsNode)) {
                    NsNode.addClass(<span class="string">'NsHidden'</span>);
                    NsNode[<span class="string">'?'</span>].hide();
                }
                <span class="keyword">return</span> NsNode;
            }
        });

       <span class="comment">/* Object.defineProperty(NsNode, 'length', {
            value: function () {
                var ret = 0;
                if (isNodeAlive(NsNode)) {
                    ret = n$.to.number(NsNode['?'].length);
                }
                return ret;
            }
        });*/</span>

        Object.defineProperty(NsNode, <span class="string">'prop'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(name, value)</span> {</span>
                <span class="keyword">var</span> ret = <span class="literal">null</span>;
                <span class="keyword">if</span> (name &amp;&amp; isNodeAlive(NsNode)) {
                    ret = NsNode;

                    <span class="keyword">if</span> (n$.is.plainObject(name)) {
                        NsNode[<span class="string">'?'</span>].prop(name);
                    }
                    <span class="keyword">else</span> <span class="keyword">if</span> (arguments.length === <span class="number">1</span>) {
                        ret = NsNode[<span class="string">'?'</span>].prop(name);
                    }
                    <span class="keyword">else</span> {
                        NsNode[<span class="string">'?'</span>].prop(name, value);
                    }
                }
                <span class="keyword">return</span> ret;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'remove'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                <span class="keyword">if</span> (NsNode &amp;&amp; NsNode[<span class="string">'?'</span>]) {
                    NsNode[<span class="string">'?'</span>].remove();
                    NsNode.childNodes = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>This will update the internal reference to the node,
which will allow isNodeAlive() to work as expected;
however, it won&#39;t delete outstanding references to the Node.
But that&#39;s OK. The GC will clean-up just fine.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    NsNode = <span class="literal">null</span>;
                }
                <span class="keyword">return</span> <span class="literal">null</span>;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'removeClass'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(name)</span> {</span>
                <span class="keyword">if</span> (name &amp;&amp; isNodeAlive(NsNode)) {
                    NsNode[<span class="string">'?'</span>].removeClass(name);
                }
                <span class="keyword">return</span> NsNode;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'removeProp'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(name)</span> {</span>
                <span class="keyword">if</span> (name &amp;&amp; isNodeAlive(NsNode)) {
                    NsNode[<span class="string">'?'</span>].removeProp(name);
                }
                <span class="keyword">return</span> NsNode;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'removeAttr'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(name)</span> {</span>
                <span class="keyword">if</span> (name &amp;&amp; isNodeAlive(NsNode)) {
                    NsNode[<span class="string">'?'</span>].removeAttr(name);
                }
                <span class="keyword">return</span> NsNode;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'show'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                <span class="keyword">if</span> (isNodeAlive(NsNode)) {
                    NsNode.removeClass(<span class="string">'NsHidden'</span>);
                    NsNode[<span class="string">'?'</span>].show();
                }
                <span class="keyword">return</span> NsNode;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'text'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(text)</span> {</span>
                <span class="keyword">if</span> (text &amp;&amp; isNodeAlive(NsNode)) {
                    <span class="keyword">if</span> (arguments.length === <span class="number">1</span> &amp;&amp; <span class="literal">false</span> === n$.is.nullOrUndefined(text)) {
                        NsNode[<span class="string">'?'</span>].text(text);
                        <span class="keyword">return</span> NsNode;
                    }
                    <span class="keyword">else</span> {
                        <span class="keyword">return</span> n$.to.string(NsNode[<span class="string">'?'</span>].text());
                    }
                }
            }
        });

        Object.defineProperty(NsNode, <span class="string">'toggle'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                <span class="keyword">if</span> (isNodeAlive(NsNode)) {
                    NsNode[<span class="string">'?'</span>].toggle();
                }
                <span class="keyword">return</span> NsNode;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'toggleEnable'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                <span class="keyword">if</span> (isNodeAlive(NsNode)) {
                    <span class="keyword">if</span> (NsInternal.enabled) {
                        NsNode.disable();
                    }
                    <span class="keyword">else</span> {
                        NsNode.enable();
                    }
                }
                <span class="keyword">return</span> NsNode;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'trigger'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(eventName, eventOpts)</span> {</span>
                <span class="keyword">if</span> (eventName &amp;&amp; isNodeAlive(NsNode)) {
                    NsNode[<span class="string">'?'</span>].trigger(eventName, eventOpts);
                }
                <span class="keyword">return</span> NsNode;
            }
        });

        Object.defineProperty(NsNode, <span class="string">'unbind'</span>, {
            value: <span class="function"><span class="keyword">function</span> <span class="params">(eventName, event)</span> {</span>
                <span class="keyword">if</span> (eventName &amp;&amp; isNodeAlive(NsNode)) {
                    NsNode[<span class="string">'?'</span>].off(eventName, event);
                }
                <span class="keyword">return</span> NsNode;
            }
        });
        Object.defineProperty(NsNode, <span class="string">'off'</span>, {
            value: NsNode.unbind
        });

        <span class="comment">/*** Region DOM Manipulation Methods */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Finally! Return something.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">return</span> n$.node.factory(NsNode);
    });

    <span class="comment">/***
     * Private, internal methods
     */</span>

    <span class="keyword">var</span> isNode = <span class="function"><span class="keyword">function</span> <span class="params">(nodeCandidate)</span> {</span>
        <span class="keyword">return</span> nodeCandidate &amp;&amp; n$.is[<span class="string">'instanceof'</span>](n$.metadata.Node, nodeCandidate);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>   var addRootToNode = function (NsNode) {
       &#39;use strict&#39;;
       var retNode = null;
       if (isNode(NsNode) &amp;&amp; !(isNode(NsNode.rootNode))) {</p>
<pre><code>       if (NsNode.tagName !== &#39;BODY&#39;) {
           if (!NsNode.rootNode || !NsNode.rootNode[0]) {
               if (!NsNode.parentNode || !NsNode.parentNode[0]) {
                   //Without valid NS parents, the only logical root node is the body node
                   retNode = n$.node.make(&#39;body&#39;, document.getElementsByTagName(&#39;body&#39;)[0], n$.to.vendorDomObject(&#39;body&#39;));
               }
               else {
                   var getRoot = function (parent) {
                       if (isNode(parent) &amp;&amp; isNode(parent.parentNode)) {

                           retNode = parent.parentNode;
                           if (isNode(retNode.parentNode) &amp;&amp; retNode.parentNode.tagName.toLowerCase() !== &#39;body&#39;) {
                               retNode = getRoot(retNode);
                           }
                       }
                       return retNode;
                   };
                   retNode = getRoot(NsNode);
               }
           }
       }
       NsNode.rootNode = n$.node.methods(retNode);
   }</code></pre>
<p>   };</p>
<p>   var addParentToNode = function (NsNode) {
       &#39;use strict&#39;;
       if (isNode(NsNode) &amp;&amp; NsNode.tagName !== &#39;body&#39; &amp;&amp; !(isNode(NsNode.parentNode))) {
           if (NsNode[0].parentNode.tagName.toLowerCase() !== &#39;body&#39;) {
               NsNode.parentNode = n$.node.make(NsNode[0].parentNode.id, NsNode[0].parentNode);
           }
       }
   };</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="comment">/**
     * Whether or no we have removed the node internally.
     * This doesn't actually test the DOM,
     * only our in-memory representation of the DOM.
     */</span>
    <span class="keyword">var</span> isNodeAlive = <span class="function"><span class="keyword">function</span> <span class="params">(NsNode)</span> {</span>
        <span class="keyword">return</span> <span class="literal">false</span> === n$.is.nullOrEmpty(NsNode) &amp;&amp; isNode(NsNode);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Define some internal data methods</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> getDataProp = <span class="function"><span class="keyword">function</span> <span class="params">(NsNode, dataObj, propName)</span> {</span>
        <span class="keyword">var</span> ret = <span class="literal">null</span>;
        <span class="keyword">if</span> (isNodeAlive(NsNode) &amp;&amp; <span class="literal">false</span> === n$.is.stringNullOrEmpty(propName)) {

            <span class="keyword">if</span> (NsNode[<span class="number">0</span>] &amp;&amp; NsNode[<span class="number">0</span>].dataset &amp;&amp; NsNode[<span class="number">0</span>].dataset[propName]) {
                ret = NsNode[<span class="number">0</span>].dataset.propName;
            }
            <span class="keyword">if</span> (n$.is.stringNullOrEmpty(ret)) {
                ret = dataObj.data[propName] ||
                NsNode[<span class="string">'?'</span>].data(propName) ||
                n$.localStorage.getItem(propName + <span class="string">'_control_data_ '</span> + NsNode.getId());
            }
        }
        <span class="keyword">return</span> ret;
    };


    <span class="keyword">var</span> setDataProp = <span class="function"><span class="keyword">function</span> <span class="params">(NsNode, dataObj, propName, value)</span> {</span>
        <span class="keyword">var</span> ret = <span class="literal">null</span>;
        <span class="keyword">if</span> (isNodeAlive() &amp;&amp; <span class="literal">false</span> === n$.is.stringNullOrEmpty(propName)) {
            ret = value;
            <span class="keyword">if</span> (NsNode[<span class="number">0</span>] &amp;&amp; NsNode[<span class="number">0</span>].dataset) {
                NsNode[<span class="number">0</span>].dataset[propName] = value;

                dataObj.data[propName] = value;
            }
            <span class="keyword">else</span> {
                dataObj.data[propName] = value;
                NsNode[<span class="string">'?'</span>].data(propName, value);
            }
        }
        <span class="keyword">return</span> ret;
    };

    <span class="keyword">var</span> setDataProperties = <span class="function"><span class="keyword">function</span> <span class="params">(NsNode, dataObj, obj)</span> {</span>
        <span class="keyword">if</span> (obj &amp;&amp; Object.keys(obj)) {
            n$.each(<span class="function"><span class="keyword">function</span> <span class="params">(key, val)</span> {</span>
                setDataProp(NsNode, dataObj, key, val);
            });
        }
    };



}(window.$nameSpace$, window.$nameSpace$[<span class="string">'?'</span>]));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
