<!DOCTYPE html>

<html>
<head>
  <title>nameSpace.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="sqlBuilderInit.html">
                sqlBuilderInit.js
              </a>
            
              
              <a class="source" href="SqlDragDropTableJoinStore.html">
                SqlDragDropTableJoinStore.js
              </a>
            
              
              <a class="source" href="SqlTableJoinSprite.html">
                SqlTableJoinSprite.js
              </a>
            
              
              <a class="source" href="SqlTableNameStore.html">
                SqlTableNameStore.js
              </a>
            
              
              <a class="source" href="_initQbUI.html">
                _initQbUI.js
              </a>
            
              
              <a class="source" href="qbFineTuningGrid.html">
                qbFineTuningGrid.js
              </a>
            
              
              <a class="source" href="qbOutputPanel.html">
                qbOutputPanel.js
              </a>
            
              
              <a class="source" href="qbSqlWindowTable.html">
                qbSqlWindowTable.js
              </a>
            
              
              <a class="source" href="qbTableGrid.html">
                qbTableGrid.js
              </a>
            
              
              <a class="source" href="qbTablePanel.html">
                qbTablePanel.js
              </a>
            
              
              <a class="source" href="qbTablesTree.html">
                qbTablesTree.js
              </a>
            
              
              <a class="source" href="fields.html">
                fields.js
              </a>
            
              
              <a class="source" href="joins.html">
                joins.js
              </a>
            
              
              <a class="source" href="manager.html">
                manager.js
              </a>
            
              
              <a class="source" href="select.html">
                select.js
              </a>
            
              
              <a class="source" href="tables.html">
                tables.js
              </a>
            
              
              <a class="source" href="function.html">
                function.js
              </a>
            
              
              <a class="source" href="is.html">
                is.js
              </a>
            
              
              <a class="source" href="methods.html">
                methods.js
              </a>
            
              
              <a class="source" href="number.html">
                number.js
              </a>
            
              
              <a class="source" href="string.html">
                string.js
              </a>
            
              
              <a class="source" href="to.html">
                to.js
              </a>
            
              
              <a class="source" href="indexedDb.html">
                indexedDb.js
              </a>
            
              
              <a class="source" href="class.html">
                class.js
              </a>
            
              
              <a class="source" href="classDefinition.html">
                classDefinition.js
              </a>
            
              
              <a class="source" href="errors.html">
                errors.js
              </a>
            
              
              <a class="source" href="subscribers.html">
                subscribers.js
              </a>
            
              
              <a class="source" href="console.html">
                console.js
              </a>
            
              
              <a class="source" href="constant.html">
                constant.js
              </a>
            
              
              <a class="source" href="each.html">
                each.js
              </a>
            
              
              <a class="source" href="object.html">
                object.js
              </a>
            
              
              <a class="source" href="objectSql.html">
                objectSql.js
              </a>
            
              
              <a class="source" href="property.html">
                property.js
              </a>
            
              
              <a class="source" href="shims.html">
                shims.js
              </a>
            
              
              <a class="source" href="uuid.html">
                uuid.js
              </a>
            
              
              <a class="source" href="metaNode.html">
                metaNode.js
              </a>
            
              
              <a class="source" href="_nodeFactory.html">
                _nodeFactory.js
              </a>
            
              
              <a class="source" href="domNode.html">
                domNode.js
              </a>
            
              
              <a class="source" href="domNodeAttributes.html">
                domNodeAttributes.js
              </a>
            
              
              <a class="source" href="_element.html">
                _element.js
              </a>
            
              
              <a class="source" href="div.html">
                div.js
              </a>
            
              
              <a class="source" href="span.html">
                span.js
              </a>
            
              
              <a class="source" href="initChildNameSpaces.html">
                initChildNameSpaces.js
              </a>
            
              
              <a class="source" href="dataModel.html">
                dataModel.js
              </a>
            
              
              <a class="source" href="dataType.html">
                dataType.js
              </a>
            
              
              <a class="source" href="dataTypeCollection.html">
                dataTypeCollection.js
              </a>
            
              
              <a class="source" href="_selectionModel.html">
                _selectionModel.js
              </a>
            
              
              <a class="source" href="selectionModelCheckBox.html">
                selectionModelCheckBox.js
              </a>
            
              
              <a class="source" href="_selectionSubscribers.html">
                _selectionSubscribers.js
              </a>
            
              
              <a class="source" href="onDeselect.html">
                onDeselect.js
              </a>
            
              
              <a class="source" href="onSelect.html">
                onSelect.js
              </a>
            
              
              <a class="source" href="proxy.html">
                proxy.js
              </a>
            
              
              <a class="source" href="store.html">
                store.js
              </a>
            
              
              <a class="source" href="actionColumn.html">
                actionColumn.js
              </a>
            
              
              <a class="source" href="checkColumn.html">
                checkColumn.js
              </a>
            
              
              <a class="source" href="column.html">
                column.js
              </a>
            
              
              <a class="source" href="columnItem.html">
                columnItem.js
              </a>
            
              
              <a class="source" href="columns.html">
                columns.js
              </a>
            
              
              <a class="source" href="gridColumn.html">
                gridColumn.js
              </a>
            
              
              <a class="source" href="rendererColumn.html">
                rendererColumn.js
              </a>
            
              
              <a class="source" href="grid.html">
                grid.js
              </a>
            
              
              <a class="source" href="_gridSubscribers.html">
                _gridSubscribers.js
              </a>
            
              
              <a class="source" href="bodyscroll.html">
                bodyscroll.js
              </a>
            
              
              <a class="source" href="drop.html">
                drop.js
              </a>
            
              
              <a class="source" href="render.html">
                render.js
              </a>
            
              
              <a class="source" href="panel.html">
                panel.js
              </a>
            
              
              <a class="source" href="_panelSubscribers.html">
                _panelSubscribers.js
              </a>
            
              
              <a class="source" href="afterLayout.html">
                afterLayout.js
              </a>
            
              
              <a class="source" href="sheet.html">
                sheet.js
              </a>
            
              
              <a class="source" href="_sheetSubscribers.html">
                _sheetSubscribers.js
              </a>
            
              
              <a class="source" href="beforeclose.html">
                beforeclose.js
              </a>
            
              
              <a class="source" href="beforeshow.html">
                beforeshow.js
              </a>
            
              
              <a class="source" href="show.html">
                show.js
              </a>
            
              
              <a class="source" href="_structureSet.html">
                _structureSet.js
              </a>
            
              
              <a class="source" href="structureSet.html">
                structureSet.js
              </a>
            
              
              <a class="source" href="_treeSubscribers.html">
                _treeSubscribers.js
              </a>
            
              
              <a class="source" href="afterrender.html">
                afterrender.js
              </a>
            
              
              <a class="source" href="itemdbclick.html">
                itemdbclick.js
              </a>
            
              
              <a class="source" href="tree.html">
                tree.js
              </a>
            
              
              <a class="source" href="treeNode.html">
                treeNode.js
              </a>
            
              
              <a class="source" href="treeStore.html">
                treeStore.js
              </a>
            
              
              <a class="source" href="nameSpace.html">
                nameSpace.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>nameSpace.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="comment">/*global nameSpaceName:true, jQuery: true, window: true */</span>
(<span class="function"><span class="keyword">function</span> <span class="params">(nameSpaceName, domVendor)</span> {</span>

    Object.defineProperties(Object.prototype, {
        getInstanceName: {
            value: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                <span class="keyword">var</span> funcNameRegex = <span class="regexp">/function (.{1,})\(/</span>;
                <span class="keyword">var</span> results = (funcNameRegex).exec((<span class="keyword">this</span>).constructor.toString());
                <span class="keyword">return</span> (results &amp;&amp; results.length &gt; <span class="number">1</span>) ? results[<span class="number">1</span>] : <span class="string">""</span>;
            }
        }
    });

    <span class="comment">/**
     * An internal representation of the namespace tree
     * @internal
    */</span>
    <span class="keyword">var</span> NsTree = {};

    <span class="comment">/**
     *    The nameSpaceName  NameSpace, an IIFE
     *    @namespace
     *    @export
     *    @global */</span> +nameSpaceName + <span class="comment">/*
     *    @return {window.nameSpaceName}
     */</span>
    Object.defineProperty(window, nameSpaceName, {
        value:
            <span class="comment">/**
             * Intializes the nameSpaceName namespace.
             * @return {window.nameSpaceName}
            */</span>
            (<span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>

                <span class="keyword">var</span> nsInternal = {
                    dependents: []
                };

                Object.defineProperty(nsInternal, <span class="string">'getNsMembers'</span>, {
                    value:
                        <span class="comment">/**
                         * Fetches the registered properties and methods on the namespace and its child namespaces
                         * @interal
                         * @return {Array} An array of members defined as strings (e.g. 'namespace.constants.astringcnst')
                        */</span>
                        <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
                            <span class="keyword">var</span> members = [];

                            <span class="function"><span class="keyword">function</span> <span class="title">recurseTree</span><span class="params">(key, lastKey)</span> {</span>
                                <span class="keyword">if</span> (<span class="keyword">typeof</span> (key) === <span class="string">'string'</span>) {
                                    members.push(lastKey + <span class="string">'.'</span> + key);
                                }
                                <span class="keyword">if</span> (domVendor.isPlainObject(key)) {
                                    Object.keys(key).forEach(<span class="function"><span class="keyword">function</span> <span class="params">(k)</span> {</span>
                                        <span class="keyword">if</span> (<span class="keyword">typeof</span> (k) === <span class="string">'string'</span>) {
                                            members.push(lastKey + <span class="string">'.'</span> + k);
                                        }
                                        <span class="keyword">if</span> (domVendor.isPlainObject(key[k])) {
                                            recurseTree(key[k], lastKey + <span class="string">'.'</span> + k);
                                        }
                                    });
                                }
                            }
                            Object.keys(NsTree[nameSpaceName]).forEach(<span class="function"><span class="keyword">function</span> <span class="params">(key)</span> {</span>
                                <span class="keyword">if</span> (domVendor.isPlainObject(NsTree[nameSpaceName][key])) {
                                    recurseTree(NsTree[nameSpaceName][key], nameSpaceName);
                                }
                            });
                            <span class="keyword">return</span> members;
                        }
                });

                Object.defineProperty(nsInternal, <span class="string">'alertDependents'</span>, {
                    value:
                        <span class="comment">/**
                         * To support dependency management, when a property is lifted onto the namespace, notify dependents to initialize
                         * @internal
                        */</span>
                        <span class="function"><span class="keyword">function</span> <span class="params">(imports)</span> {</span>
                        <span class="keyword">var</span> deps = nsInternal.dependents.filter(<span class="function"><span class="keyword">function</span> <span class="params">(depOn)</span> {</span>
                            <span class="keyword">return</span> <span class="literal">false</span> === depOn(imports);
                        });
                        <span class="keyword">if</span> (Array.isArray(deps)) {
                            nsInternal.dependents = deps;
                        }
                    }
                });

                <span class="comment">/**
                 * Internal nameSpaceName method to create new "sub" namespaces on arbitrary child objects.
                 * @internal	
                 * @param spacename {String} the namespace name
                 * @param tree {Object} the internal tree representation of the current level of the namespace
                 * @return namespace {Object} A new namespace
                 */</span>
                <span class="function"><span class="keyword">function</span> <span class="title">makeNameSpace</span><span class="params">(spacename, tree)</span> {</span>
                    <span class="comment">/**
                     * An internal mechanism to represent the instance of this namespace
                     * @constructor
                    */</span>
                    <span class="keyword">var</span> Class = <span class="keyword">new</span> Function(
                        <span class="string">"return function "</span> + spacename + <span class="string">"(){}"</span>
                    )();
                    
                    <span class="comment">/**
                     * The derived instance to be constructed
                     * @constructor
                    */</span>
                    <span class="function"><span class="keyword">function</span> <span class="title">Base</span><span class="params">(nsName)</span> {</span>
                        <span class="keyword">var</span> proto = <span class="keyword">this</span>;
                        tree[nsName] = tree[nsName] || {};
                        <span class="keyword">var</span> nsTree = tree[nsName];

                        Object.defineProperty(<span class="keyword">this</span>, <span class="string">'register'</span>, {
                            value:
                                <span class="comment">/**
                                 *	Register (e.g. "Lift") an Object into the prototype of the namespace.
                                 *	This Object will be readable/executable but is otherwise immutable.
                                 *   @param {String} name The name of the object to lift
                                 *   @param {Object} obj Any, arbitrary Object to use as the value.
                                 *   @return {Object} The value of the new property.
                                 */</span>
                                <span class="function"><span class="keyword">function</span> <span class="params">(name, obj, enumerable)</span> {</span>
                                    <span class="string">'use strict'</span>;
                                    <span class="keyword">if</span> (!(<span class="keyword">typeof</span> name === <span class="string">'string'</span>) || name === <span class="string">''</span>) {
                                        <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'Cannot lift a new property without a valid name.'</span>);
                                    }
                                    <span class="keyword">if</span> (!obj) {
                                        <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'Cannot lift a new property without a valid property instance.'</span>);
                                    }
                                    <span class="keyword">if</span> (proto[name]) {
                                        <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'Property named '</span> + name + <span class="string">' is already defined on '</span> + spacename + <span class="string">'.'</span>);
                                    }</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Guard against obliterating the tree as the tree is recursively extended</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                                    nsTree[name] = nsTree[name] || {
                                        name: name,
                                        type: <span class="keyword">typeof</span> obj,
                                        instance: obj.getInstanceName ? obj.getInstanceName() : <span class="string">'unknown'</span>
                                    };

                                    Object.defineProperty(proto, name, {
                                        value: obj,
                                        enumerable: <span class="literal">false</span> !== enumerable
                                    });
                                    nsInternal.alertDependents(nsName + <span class="string">'.'</span> + spacename + <span class="string">'.'</span> + name);

                                    <span class="keyword">return</span> obj;
                                }
                        });

                        proto.register(<span class="string">'makeSubNameSpace'</span>,
                            <span class="comment">/**
                             *	Create a new, static namespace on the current parent (e.g. nsName.to... || nsName.is...)
                             *   @param {String} subNameSpace The name of the new namespace.
                             *   @return {Object} The new namespace.
                             */</span>
                            <span class="function"><span class="keyword">function</span> <span class="params">(subNameSpace)</span> {</span>
                                <span class="string">'use strict'</span>;
                                <span class="keyword">if</span> (!(<span class="keyword">typeof</span> subNameSpace === <span class="string">'string'</span>) || subNameSpace === <span class="string">''</span>) {
                                    <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'Cannot create a new sub namespace without a valid name.'</span>);
                                }
                                <span class="keyword">if</span> (proto.subNameSpace) {
                                    <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'Sub namespace named '</span> + subNameSpace + <span class="string">' is already defined on '</span> + spacename + <span class="string">'.'</span>);
                                }
                                nsInternal.alertDependents(nsName + <span class="string">'.'</span> + subNameSpace);

                                <span class="keyword">var</span> newNameSpace = makeNameSpace(subNameSpace, nsTree);

                                <span class="keyword">if</span> (subNameSpace !== <span class="string">'constants'</span>) {
                                    newNameSpace.register(<span class="string">'constants'</span>, makeNameSpace(<span class="string">'constants'</span>, nsTree), <span class="literal">false</span>);
                                }

                                proto.register(subNameSpace, newNameSpace, <span class="literal">false</span>);
                                <span class="keyword">return</span> newNameSpace;
                            }, <span class="literal">false</span>);
                    }

                    Class.prototype = <span class="keyword">new</span> Base(spacename);</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Class.prototype.parent = Base.prototype;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
                    <span class="keyword">return</span> <span class="keyword">new</span> Class(spacename);
                };</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Create the root of the tree as the current namespace</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                NsTree[nameSpaceName] = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Define the core namespace and the return of this class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="keyword">var</span> NsOut = makeNameSpace(nameSpaceName, NsTree[nameSpaceName]);
                Object.defineProperties(window, { $nameSpace$: { value: NsOut } });</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Cache a handle on the vendor (probably jQuery) on the root namespace</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                NsOut.register(<span class="string">'?'</span>, domVendor, <span class="literal">false</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Cache the tree (useful for documentation/visualization/debugging)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                NsOut.register(<span class="string">'tree'</span>, NsTree[nameSpaceName], <span class="literal">false</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Cache the name space name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                NsOut.register(<span class="string">'name'</span>, nameSpaceName, <span class="literal">false</span>);


                <span class="comment">/**
                 *    "Depend" an Object upon another member of this namespace, upon another namespace,
                 *   or upon a member of another namespace
                 *   @param (Array) array of dependencies for this method
                 *   @param (Function) obj Any, arbitrary Object to use as the value
                 */</span>
                <span class="function"><span class="keyword">function</span> <span class="title">dependsOn</span><span class="params">(dependencies, callBack, imports)</span> {</span>
                    <span class="string">'use strict'</span>;
                    <span class="keyword">var</span> ret = <span class="literal">false</span>;
                    <span class="keyword">var</span> nsMembers = nsInternal.getNsMembers();
                    <span class="keyword">if</span> (dependencies &amp;&amp; dependencies.length &gt; <span class="number">0</span> &amp;&amp; callBack) {
                        <span class="keyword">var</span> missing = dependencies.filter(<span class="function"><span class="keyword">function</span> <span class="params">(depen)</span> {</span>
                            <span class="keyword">return</span> (nsMembers.indexOf(depen) === -<span class="number">1</span> &amp;&amp; (!imports || imports !== depen));
                        });
                        <span class="keyword">if</span> (missing.length === <span class="number">0</span>) {
                            ret = <span class="literal">true</span>;
                            callBack();
                        }
                        <span class="keyword">else</span> {
                            nsInternal.dependents.push(<span class="function"><span class="keyword">function</span> <span class="params">(imports)</span> {</span>
                                <span class="keyword">return</span> dependsOn(missing, callBack, imports);
                            });
                        }
                    }
                    <span class="keyword">return</span> ret;
                };
                NsOut.register(<span class="string">'dependsOn'</span>, dependsOn, <span class="literal">false</span>);

                <span class="keyword">return</span> NsOut;

            }())
    });

}(<span class="string">'OJ'</span>, jQuery));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
